import { ComputedContext } from './ComputedContext';
import { createComputed } from './createComputed';
import { createSignal } from './createSignal';
export function createComputedAsync(factory, initial = null) {
    let handle;
    const signal = createSignal(factory);
    return createComputed(() => {
        const promise = signal();
        if (!handle || handle.promise !== promise) {
            handle = ComputedContext.collectPromise(promise, handle?.value ?? initial);
        }
        return handle.value;
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlQ29tcHV0ZWRBc3luYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zaWduYWxzL2NyZWF0ZUNvbXB1dGVkQXN5bmMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUNoRCxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFTNUMsTUFBTSxVQUFVLG1CQUFtQixDQUNqQyxPQUF5QixFQUN6QixVQUFvQixJQUFJO0lBRXhCLElBQUksTUFBK0IsQ0FBQztJQUNwQyxNQUFNLE1BQU0sR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDckMsT0FBTyxjQUFjLENBQUMsR0FBRyxFQUFFO1FBQ3pCLE1BQU0sT0FBTyxHQUFHLE1BQU0sRUFBRSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLE9BQU8sS0FBSyxPQUFPLEVBQUUsQ0FBQztZQUMxQyxNQUFNLEdBQUcsZUFBZSxDQUFDLGNBQWMsQ0FDckMsT0FBTyxFQUNQLE1BQU0sRUFBRSxLQUFLLElBQUksT0FBTyxDQUN6QixDQUFDO1FBQ0osQ0FBQztRQUVELE9BQU8sTUFBTSxDQUFDLEtBQUssQ0FBQztJQUN0QixDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMifQ==