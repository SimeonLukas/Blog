import DefaultPlugin from '../plugin/DefaultPlugin';
import { Color, Vector2 } from '../types';
import { Logger } from './Logger';
import { createVersionObject } from './Project';
export const defaultUserProjectSettings = {
    shared: {
        background: 'FFFFFF00',
        range: [0, Infinity],
        size: { x: 1920, y: 1080 },
    },
    rendering: {
        exporter: {
            name: '@revideo/core/wasm',
        },
        fps: 30,
        resolutionScale: 1,
        colorSpace: 'srgb',
    },
    preview: {
        fps: 30,
        resolutionScale: 1,
    },
};
export function makeProject(project) {
    // Don't delete, has side effects
    // TODO(konsti): Figure out how to get rid of this
    void DefaultPlugin;
    const settings = {
        ...defaultUserProjectSettings,
        ...project.settings,
        shared: {
            ...defaultUserProjectSettings.shared,
            ...project.settings?.shared,
        },
        rendering: {
            ...defaultUserProjectSettings.rendering,
            ...project.settings?.rendering,
        },
        preview: {
            ...defaultUserProjectSettings.preview,
            ...project.settings?.preview,
        },
    };
    // Convert background and size to correct types
    const convertedSettings = {
        ...settings,
        shared: {
            ...settings.shared,
            background: new Color(settings.shared.background),
            size: new Vector2(settings.shared.size),
        },
    };
    return {
        ...project,
        name: project.name ?? 'project',
        settings: convertedSettings,
        plugins: [],
        logger: new Logger(),
        versions: createVersionObject('0.10.4'),
    };
}
export async function addEditorToProject(project) {
    const url = '/@id/@revideo/2d/editor';
    const imported = await import(
    /* webpackIgnore: true */ /* @vite-ignore */ url);
    const plugin = imported.default();
    return {
        ...project,
        plugins: [...project.plugins, plugin],
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFrZVByb2plY3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvYXBwL21ha2VQcm9qZWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sYUFBYSxNQUFNLHlCQUF5QixDQUFDO0FBQ3BELE9BQU8sRUFBQyxLQUFLLEVBQUUsT0FBTyxFQUFDLE1BQU0sVUFBVSxDQUFDO0FBQ3hDLE9BQU8sRUFBQyxNQUFNLEVBQUMsTUFBTSxVQUFVLENBQUM7QUFFaEMsT0FBTyxFQUFDLG1CQUFtQixFQUFDLE1BQU0sV0FBVyxDQUFDO0FBRTlDLE1BQU0sQ0FBQyxNQUFNLDBCQUEwQixHQUF3QjtJQUM3RCxNQUFNLEVBQUU7UUFDTixVQUFVLEVBQUUsVUFBVTtRQUN0QixLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDO1FBQ3BCLElBQUksRUFBRSxFQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBQztLQUN6QjtJQUNELFNBQVMsRUFBRTtRQUNULFFBQVEsRUFBRTtZQUNSLElBQUksRUFBRSxvQkFBb0I7U0FDM0I7UUFDRCxHQUFHLEVBQUUsRUFBRTtRQUNQLGVBQWUsRUFBRSxDQUFDO1FBQ2xCLFVBQVUsRUFBRSxNQUFNO0tBQ25CO0lBQ0QsT0FBTyxFQUFFO1FBQ1AsR0FBRyxFQUFFLEVBQUU7UUFDUCxlQUFlLEVBQUUsQ0FBQztLQUNuQjtDQUNGLENBQUM7QUFFRixNQUFNLFVBQVUsV0FBVyxDQUFDLE9BQW9CO0lBQzlDLGlDQUFpQztJQUNqQyxrREFBa0Q7SUFDbEQsS0FBSyxhQUFhLENBQUM7SUFFbkIsTUFBTSxRQUFRLEdBQUc7UUFDZixHQUFHLDBCQUEwQjtRQUM3QixHQUFHLE9BQU8sQ0FBQyxRQUFRO1FBQ25CLE1BQU0sRUFBRTtZQUNOLEdBQUcsMEJBQTBCLENBQUMsTUFBTTtZQUNwQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLEVBQUUsTUFBTTtTQUM1QjtRQUNELFNBQVMsRUFBRTtZQUNULEdBQUcsMEJBQTBCLENBQUMsU0FBUztZQUN2QyxHQUFHLE9BQU8sQ0FBQyxRQUFRLEVBQUUsU0FBUztTQUMvQjtRQUNELE9BQU8sRUFBRTtZQUNQLEdBQUcsMEJBQTBCLENBQUMsT0FBTztZQUNyQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLEVBQUUsT0FBTztTQUM3QjtLQUNGLENBQUM7SUFFRiwrQ0FBK0M7SUFDL0MsTUFBTSxpQkFBaUIsR0FBRztRQUN4QixHQUFHLFFBQVE7UUFDWCxNQUFNLEVBQUU7WUFDTixHQUFHLFFBQVEsQ0FBQyxNQUFNO1lBQ2xCLFVBQVUsRUFBRSxJQUFJLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVcsQ0FBQztZQUNsRCxJQUFJLEVBQUUsSUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7U0FDeEM7S0FDRixDQUFDO0lBRUYsT0FBTztRQUNMLEdBQUcsT0FBTztRQUNWLElBQUksRUFBRSxPQUFPLENBQUMsSUFBSSxJQUFJLFNBQVM7UUFDL0IsUUFBUSxFQUFFLGlCQUFpQjtRQUMzQixPQUFPLEVBQUUsRUFBRTtRQUNYLE1BQU0sRUFBRSxJQUFJLE1BQU0sRUFBRTtRQUNwQixRQUFRLEVBQUUsbUJBQW1CLENBQUMsUUFBUSxDQUFDO0tBQ3hDLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxDQUFDLEtBQUssVUFBVSxrQkFBa0IsQ0FBQyxPQUFnQjtJQUN2RCxNQUFNLEdBQUcsR0FBRyx5QkFBeUIsQ0FBQztJQUN0QyxNQUFNLFFBQVEsR0FBRyxNQUFNLE1BQU07SUFDM0IseUJBQXlCLENBQUMsa0JBQWtCLENBQUMsR0FBRyxDQUNqRCxDQUFDO0lBQ0YsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBRWxDLE9BQU87UUFDTCxHQUFHLE9BQU87UUFDVixPQUFPLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDO0tBQ3RDLENBQUM7QUFDSixDQUFDIn0=