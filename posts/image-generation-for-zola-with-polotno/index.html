<!DOCTYPE html>
<html lang="de">
<html class="dark light">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    

    
    
    
    <title>
         Automatische Cover-Bildgenerierung für Zola-Blogs mit Bun, TypeScript und Polotno
        
    </title>

    
    
    <meta name="description" content="Ein Script, das aus den Metadaten von Blogbeiträgen automatisch verschiedene Bilder für verschiedene Plattformen generiert - mit einheitlichem Design, aber i..." />
    
    

    
    <meta property="og:image" content="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno//images/de/preview.jpg" />
    <meta property="og:logo" content="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno//imagesde/preview.jpg" />
    <!-- twitter card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/images/de/preview.jpg">
    

    
    <meta property="og:title" content="Automatische Cover-Bildgenerierung für Zola-Blogs mit Bun, TypeScript und Polotno" />
    <!-- twitter title -->
    <meta name="twitter:title" content="Automatische Cover-Bildgenerierung für Zola-Blogs mit Bun, TypeScript und Polotno">
    
    

    
    
    <meta property="og:description" content="Ein Script, das aus den Metadaten von Blogbeiträgen automatisch verschiedene Bilder für verschiedene Plattformen generiert - mit einheitlichem Design, aber i..."/>
    <!-- twitter description -->
    <meta name="twitter:description" content="Ein Script, das aus den Metadaten von Blogbeiträgen automatisch verschiedene Bilder für verschiedene Plattformen generiert - mit einheitlichem Design, aber i...">
    
    

    <meta property="og:url" content="https:&#x2F;&#x2F;simeon.staneks.de"/>
    <meta property="og:type" content="article" />

    <meta name="keywords"
    content="Webdesign, Website, Benutzerfreundlichkeit, Responsive Design, Oberammergau, HTML, CSS, UX, UI, Grafikdesign, Typografie, Farbschema, Barrierefreiheit, SEO, Suchmaschinenoptimierung, Content-Strategie, Interaktionsdesign, Wireframes, Prototyping, Navigation, Mobile First, Usability-Tests, SSG, Garmisch-Partenkirchen, App">
    <meta name="author" content="Simeon Stanek" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="msapplication-TileColor" content="#00a300">
    <meta name="theme-color" content="#ffffff">
    <meta property="og:site_name" content="Simeon&#x27;s Blog" />


    
    
    <link rel="icon" type="image/png" href=https:&#x2F;&#x2F;simeon.staneks.de&#x2F;android-chrome-512x512.png />
    

    
    
    <link href=https://simeon.staneks.de/fonts.css rel="stylesheet" />
    

    
    

    
    
    <script src=https://simeon.staneks.de/js/codeblock.js></script>
    

    
    
    <script src=https://simeon.staneks.de/js/toc.js></script>
    

    
    
    <script src=https://simeon.staneks.de/js/note.js></script>
    
    

    
    <link rel="alternate" type="application/atom+xml" title="Simeon&#x27;s Blog" href="https://simeon.staneks.de/ atom.xml">


    
    
    <link rel="stylesheet" type="text/css" href=https://simeon.staneks.de/theme/light.css />
    <link id="darkModeStyle" rel="stylesheet" type="text/css" href="https://simeon.staneks.de/theme/dark.css" />
    

    <!-- Set the correct theme in the script -->
    <script src=https://simeon.staneks.de/js/themetoggle.js></script>
    
    <script>setTheme(getSavedTheme());</script>
    
    <script src=https://simeon.staneks.de/js/index.js></script>
    <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script>

    <link rel="stylesheet" type="text/css" media="screen" href=https://simeon.staneks.de/main.css />

    
</head>

<body onload="updatelanguage()">
    <div class="content">
        <header>
    <div class="main">
        <div> <a id="navigation_start" href=https:&#x2F;&#x2F;simeon.staneks.de>Simeon&#x27;s Blog </a> 
            <p style="font-size: xx-small;">lieber unperfekt starten als perfekt warten</p> 
        </div>
        <div class="socials">
            
            <a rel="me" href="https:&#x2F;&#x2F;indieweb.social&#x2F;@simerl" class="social mastodon">
                <img alt=mastodon src=https://simeon.staneks.de/social_icons/mastodon.svg>
            </a>
            
            <a rel="me" href="https:&#x2F;&#x2F;www.instagram.com&#x2F;simeonstanek&#x2F;" class="social instagram">
                <img alt=instagram src=https://simeon.staneks.de/social_icons/instagram.svg>
            </a>
            
            <a rel="me" href="https:&#x2F;&#x2F;github.com&#x2F;SimeonLukas" class="social github">
                <img alt=github src=https://simeon.staneks.de/social_icons/github.svg>
            </a>
            
            <a rel="me" href="https:&#x2F;&#x2F;buymeacoffee.com&#x2F;simeonlukas" class="social buy me a coffee">
                <img alt=buy me a coffee src=https://simeon.staneks.de/social_icons/bmc-logo.svg>
            </a>
            
            <a rel="me" href="&#x2F;rss.xml" class="social rss">
                <img alt=rss src=https://simeon.staneks.de/social_icons/rss.svg>
            </a>
            
        </div>
    </div>

    <nav>
        
        <a class="navigation_lang &#x2F;posts" href=&#x2F;posts style="margin-left: 0.5em">&#x2F;posts</a>
        
        <a class="navigation_lang &#x2F;pages" href=&#x2F;pages style="margin-left: 0.5em">&#x2F;pages</a>
        
        <a class="navigation_lang &#x2F;about" href=&#x2F;pages&#x2F;about style="margin-left: 0.5em">&#x2F;about</a>
        
        <a class="navigation_lang &#x2F;tags" href=&#x2F;tags style="margin-left: 0.5em">&#x2F;tags</a>
        

        
        |<a id="dark-mode-toggle" onclick="toggleTheme(); event.preventDefault();" href="#">
            <img src=https://simeon.staneks.de/feather/sun.svg id="sun-icon" style="filter: invert(1);" alt="Light" />
            <img src=https://simeon.staneks.de/feather/moon.svg id="moon-icon" alt="Dark" />
        </a>

        <!-- Inititialize the theme toggle icons -->
        <script>updateItemToggleTheme()</script>
        
        <a id="language-toggle" onclick="toggleLanguage(); event.preventDefault();" href="#">
            <img src=https://simeon.staneks.de/feather/globe.svg alt="Change Language" /><span style="font-size: xx-small;" id="language-name">de</span>
        </a>
    </nav>
</header>


        
        
    
<main>
    <article>
        <div class="title">
            
            
    <h1 class="page-header">
        Automatische Cover-Bildgenerierung für Zola-Blogs mit Bun, TypeScript und Polotno<span class="primary-color" style="font-size: 1.6em">.</span>
    </h1>

        </div>
        Ein Script, das aus den Metadaten von Blogbeiträgen automatisch verschiedene Bilder für verschiedene Plattformen generiert - mit einheitlichem Design, aber individuellen Elementen basierend auf dem Inhalt des jeweiligen Artikels.

        

        
        
        
            <div class="toc-container">
                <h1 class="toc-title">Table of Contents</h1>
                <ul class="toc-list">
                    
                        <li>
                            <a href="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/#die-genese-warum-automatisch-bilder-generieren">Die Genese: Warum automatisch Bilder generieren?</a>
                            
                        </li>
                    
                        <li>
                            <a href="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/#die-technik-zola-bun-typescript-und-polotno">Die Technik: Zola, Bun, TypeScript und Polotno</a>
                            
                                <ul>
                                    
                                        <li>
                                            <a href="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/#die-technische-losung-im-uberblick">Die technische Lösung im Überblick</a>
                                        </li>

                                        
                                    
                                        <li>
                                            <a href="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/#das-deployment-script">Das Deployment-Script</a>
                                        </li>

                                        
                                    
                                        <li>
                                            <a href="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/#der-bildgenerator-unter-der-haube">Der Bildgenerator: Unter der Haube</a>
                                        </li>

                                        
                                    
                                        <li>
                                            <a href="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/#der-ablauf-im-detail">Der Ablauf im Detail</a>
                                        </li>

                                        
                                            <ul>
                                                
                                                    <li>
                                                        <a href="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/#1-daten-aus-dem-rss-feed-auslesen">1. Daten aus dem RSS-Feed auslesen</a>
                                                    </li>
                                                
                                                    <li>
                                                        <a href="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/#2-individuelle-farbgebung-pro-artikel">2. Individuelle Farbgebung pro Artikel</a>
                                                    </li>
                                                
                                                    <li>
                                                        <a href="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/#3-template-anpassung-fur-jeden-artikel">3. Template-Anpassung für jeden Artikel</a>
                                                    </li>
                                                
                                                    <li>
                                                        <a href="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/#4-bildgenerierung-mit-polotno">4. Bildgenerierung mit Polotno</a>
                                                    </li>
                                                
                                                    <li>
                                                        <a href="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/#5-speicherung-der-bilder-in-der-blogstruktur">5. Speicherung der Bilder in der Blogstruktur</a>
                                                    </li>
                                                
                                                    <li>
                                                        <a href="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/#6-mehrsprachige-unterstutzung">6. Mehrsprachige Unterstützung</a>
                                                    </li>
                                                
                                            </ul>
                                        
                                    
                                        <li>
                                            <a href="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/#zola-konfiguration-fur-die-bildnutzung">Zola-Konfiguration für die Bildnutzung</a>
                                        </li>

                                        
                                    
                                        <li>
                                            <a href="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/#die-vorteile-der-automatisierung">Die Vorteile der Automatisierung</a>
                                        </li>

                                        
                                    
                                        <li>
                                            <a href="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/#fazit">Fazit</a>
                                        </li>

                                        
                                    
                                </ul>
                            
                        </li>
                    
                </ul>
            </div>
        
        

        <section class="body">
            <h1 id="die-genese-warum-automatisch-bilder-generieren"><a class="zola-anchor" href="#die-genese-warum-automatisch-bilder-generieren" aria-label="Anchor link for: die-genese-warum-automatisch-bilder-generieren">Die Genese: Warum automatisch Bilder generieren?</a></h1>
<p>Ich liebe Podcasts und höre wirklich viel, deshalb habe ich auf meinem Android Smartphone <a href="https://antennapod.org/">Antennapod</a> installiert. Wirklich mein lieblings Podcatcher, der dann und wann als Feed-Reader verwendet wird, dabei ist mir aufgefallen, dass ganz einfache RSS-Feeds keine Coverbilder haben, doch für meinen Feed wollte ich das ändern, außerdem brauchte ich sowieso Vorschaubilder für die sozialen Medien. Jeder Blogbeitrag braucht ein ansprechendes Titelbild, um in sozialen Medien, RSS-Feeds und auf der Website selbst Aufmerksamkeit zu erregen. Doch das manuelle Erstellen individueller Bilder für jeden Artikel ist zeitaufwändig und kostet unglaublich viel Überwindung.</p>
<p>Ich habe mich daher entschieden, diesen Prozess zu automatisieren: Ein Script, das aus den Metadaten meiner Blogbeiträge automatisch verschiedene Bilder für verschiedene Plattformen generiert - mit einheitlichem Design, aber individuellen Elementen basierend auf dem Inhalt des jeweiligen Artikels.</p>
<div style="
    text-align: center;
    display: flex;
    overflow: scroll;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;">
<img src="/posts/20241120//images/de/feed.jpg" alt="RSS-Feed-Bild">
<img src="/posts/20241120//images/en/feed.jpg" alt="RSS-Feed-Bild">
<img src="/posts/20241120//images/de/instagram1.jpg" alt="Instagram-Bild 1">
<img src="/posts/20241120//images/de/instagram2.jpg" alt="Instagram-Bild 2">
<img src="/posts/20241120//images/en/instagram1.jpg" alt="Instagram-Bild 1">
<img src="/posts/20241120//images/en/instagram2.jpg" alt="Instagram-Bild 2">
<img src="/posts/20241120//images/de/preview.jpg" alt="OG-Image">
<img src="/posts/20241120//images/en/preview.jpg" alt="OG-Image">
</div>
<h1 id="die-technik-zola-bun-typescript-und-polotno"><a class="zola-anchor" href="#die-technik-zola-bun-typescript-und-polotno" aria-label="Anchor link for: die-technik-zola-bun-typescript-und-polotno">Die Technik: Zola, Bun, TypeScript und Polotno</a></h1>
<h2 id="die-technische-losung-im-uberblick"><a class="zola-anchor" href="#die-technische-losung-im-uberblick" aria-label="Anchor link for: die-technische-losung-im-uberblick">Die technische Lösung im Überblick</a></h2>
<p>Meine Lösung nutzt folgende Technologien:</p>
<ul>
<li><strong>Zola</strong> als statischer Site-Generator für den Blog und in diesem Fall als Server für den RSS-Feed</li>
<li><strong>Bun</strong> als JavaScript-Runtime (schneller als Node.js)</li>
<li><strong>TypeScript</strong> für die Programmlogik</li>
<li><strong>Polotno</strong> zur programmatischen Bildgenerierung</li>
<li><strong>RSS-Feeds</strong> als Datenquelle für die Beitragsinformationen</li>
</ul>
<p>Das System generiert für jeden Blogbeitrag vier verschiedene Bildformate:</p>
<ol>
<li>Ein OG-Image für Social Media Previews</li>
<li>Ein Instagram-Format 1</li>
<li>Ein Instagram-Format 2</li>
<li>Ein Feed-Bild für RSS-Reader</li>
</ol>
<p>Zusätzlich werden alle Bilder automatisch für verschiedene Sprachversionen des Blogs erstellt.</p>
<h2 id="das-deployment-script"><a class="zola-anchor" href="#das-deployment-script" aria-label="Anchor link for: das-deployment-script">Das Deployment-Script</a></h2>
<p>Hier ist das Bash-Script, das den gesamten Prozess startet:</p>
<pre data-lang="bash" style="background-color:#fafafa;color:#61676c;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="font-style:italic;color:#abb0b6;">#!/bin/bash
</span><span style="font-style:italic;color:#abb0b6;"># Veröffentlichungs-Skript für den Blog
</span><span style="color:#f07171;">cd</span><span> /Users/simeonstanek/Apps/BLOG-Homepage/simeonsblog/scripts
</span><span>
</span><span style="font-style:italic;color:#abb0b6;"># start the server
</span><span style="color:#f29718;">zola</span><span> serve</span><span style="color:#ff8f40;"> --port</span><span> 1234 </span><span style="color:#ed9366;">&amp;
</span><span style="color:#f29718;">sleep</span><span> 5
</span><span style="font-style:italic;color:#abb0b6;"># run the generator
</span><span style="color:#f29718;">bun</span><span> run index.ts
</span><span>
</span><span style="font-style:italic;color:#abb0b6;"># stop the server
</span><span style="color:#f07171;">kill </span><span>$(</span><span style="color:#f29718;">lsof</span><span style="color:#ff8f40;"> -t -i</span><span>:1234)
</span><span>
</span><span style="font-style:italic;color:#abb0b6;"># commit all changes
</span><span style="color:#f07171;">cd</span><span> /Users/simeonstanek/Apps/BLOG-Homepage/simeonsblog
</span><span style="color:#f29718;">git</span><span> pull
</span><span style="color:#f29718;">git</span><span> add </span><span style="color:#ed9366;">*
</span><span style="color:#f29718;">git</span><span> commit</span><span style="color:#ff8f40;"> -m </span><span style="color:#86b300;">&quot;update content on $</span><span>(</span><span style="color:#f29718;">date</span><span>)</span><span style="color:#86b300;">&quot;
</span><span style="color:#f29718;">git</span><span> push
</span></code></pre>
<p>Dieses Script führt folgende Schritte aus:</p>
<ol>
<li>Wechselt in das Scripts-Verzeichnis</li>
<li>Startet den Zola-Server im Hintergrund (für den RSS-Feed)</li>
<li>Wartet 5 Sekunden, bis der Server vollständig hochgefahren ist</li>
<li>Führt das TypeScript-Script mit Bun aus</li>
<li>Stoppt den Zola-Server</li>
<li>Checkt Änderungen ein und pusht sie zum Git-Repository</li>
</ol>
<h2 id="der-bildgenerator-unter-der-haube"><a class="zola-anchor" href="#der-bildgenerator-unter-der-haube" aria-label="Anchor link for: der-bildgenerator-unter-der-haube">Der Bildgenerator: Unter der Haube</a></h2>
<p>Nun schauen wir uns den Kern der Lösung an - das TypeScript-Script, das die eigentliche Arbeit erledigt:</p>
<pre data-lang="typescript" style="background-color:#fafafa;color:#61676c;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><span style="color:#fa6e32;">import </span><span>{ hash } </span><span style="color:#fa6e32;">from </span><span style="color:#86b300;">&quot;bun&quot;</span><span style="color:#61676ccc;">;
</span><span style="color:#fa6e32;">const </span><span>fs </span><span style="color:#ed9366;">= </span><span style="color:#f07171;">require</span><span>(</span><span style="color:#86b300;">&quot;fs&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span style="color:#fa6e32;">const </span><span>{ DOMParser } </span><span style="color:#ed9366;">= </span><span style="color:#f07171;">require</span><span>(</span><span style="color:#86b300;">&quot;xmldom&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span style="color:#fa6e32;">const </span><span>{ createInstance } </span><span style="color:#ed9366;">= </span><span style="color:#f07171;">require</span><span>(</span><span style="color:#86b300;">&quot;polotno-node&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>
</span><span style="font-style:italic;color:#abb0b6;">// Hauptfunktion, die den gesamten Prozess steuert
</span><span style="color:#fa6e32;">async function </span><span style="color:#f29718;">run</span><span>(</span><span style="color:#ff8f40;">x</span><span style="color:#61676ccc;">, </span><span style="color:#ff8f40;">lang</span><span>) {
</span><span>    </span><span style="color:#fa6e32;">let </span><span>titles </span><span style="color:#ed9366;">= </span><span>[]</span><span style="color:#61676ccc;">;
</span><span>    </span><span style="color:#fa6e32;">let </span><span>dates </span><span style="color:#ed9366;">= </span><span>[]</span><span style="color:#61676ccc;">;
</span><span>    </span><span style="color:#fa6e32;">let </span><span>urls </span><span style="color:#ed9366;">= </span><span>[]</span><span style="color:#61676ccc;">;
</span><span>    </span><span style="color:#fa6e32;">let </span><span>content </span><span style="color:#ed9366;">= </span><span>[]</span><span style="color:#61676ccc;">;
</span><span>    </span><span style="color:#fa6e32;">let </span><span>languages </span><span style="color:#ed9366;">= </span><span style="color:#86b300;">&quot;de&quot;</span><span style="color:#61676ccc;">;
</span><span>
</span><span>    </span><span style="font-style:italic;color:#abb0b6;">// RSS-Feed abrufen und verarbeiten
</span><span>    </span><span style="color:#fa6e32;">const </span><span>data </span><span style="color:#ed9366;">= </span><span style="color:#f29718;">fetch</span><span>(lang)
</span><span>        </span><span style="color:#ed9366;">.</span><span style="color:#f07171;">then</span><span>((</span><span style="color:#ff8f40;">response</span><span>) </span><span style="color:#fa6e32;">=&gt; </span><span>response</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">text</span><span>())
</span><span>        </span><span style="color:#ed9366;">.</span><span style="color:#f07171;">then</span><span>((</span><span style="color:#ff8f40;">str</span><span>) </span><span style="color:#fa6e32;">=&gt; </span><span>{
</span><span>            </span><span style="color:#fa6e32;">let </span><span>parser </span><span style="color:#ed9366;">= new </span><span style="color:#399ee6;">DOMParser</span><span>()</span><span style="color:#61676ccc;">;
</span><span>            </span><span style="color:#fa6e32;">let </span><span>xml </span><span style="color:#ed9366;">= </span><span>parser</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">parseFromString</span><span>(str</span><span style="color:#61676ccc;">, </span><span style="color:#86b300;">&quot;text/xml&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>            </span><span style="color:#fa6e32;">let </span><span>items </span><span style="color:#ed9366;">= </span><span>xml</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">getElementsByTagName</span><span>(</span><span style="color:#86b300;">&quot;item&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>            languages </span><span style="color:#ed9366;">= </span><span>xml</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">getElementsByTagName</span><span>(</span><span style="color:#86b300;">&quot;language&quot;</span><span>)[</span><span style="color:#ff8f40;">0</span><span>]</span><span style="color:#ed9366;">.</span><span>childNodes[</span><span style="color:#ff8f40;">0</span><span>]</span><span style="color:#ed9366;">.</span><span>nodeValue</span><span style="color:#61676ccc;">;
</span><span>
</span><span>            </span><span style="font-style:italic;color:#abb0b6;">// Informationen aus dem RSS-Feed extrahieren
</span><span>            </span><span style="color:#fa6e32;">for </span><span>(</span><span style="color:#fa6e32;">let </span><span>o </span><span style="color:#ed9366;">= </span><span style="color:#ff8f40;">0</span><span style="color:#61676ccc;">; </span><span>o </span><span style="color:#ed9366;">&lt; </span><span>items</span><span style="color:#ed9366;">.</span><span>length</span><span style="color:#61676ccc;">; </span><span>o</span><span style="color:#ed9366;">++</span><span>) {
</span><span>                titles</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">push</span><span>(items[o]</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">getElementsByTagName</span><span>(</span><span style="color:#86b300;">&quot;title&quot;</span><span>)[</span><span style="color:#ff8f40;">0</span><span>]</span><span style="color:#ed9366;">.</span><span>childNodes[</span><span style="color:#ff8f40;">0</span><span>]</span><span style="color:#ed9366;">.</span><span>nodeValue)</span><span style="color:#61676ccc;">;
</span><span>
</span><span>                </span><span style="color:#fa6e32;">let </span><span>date </span><span style="color:#ed9366;">= new </span><span style="color:#399ee6;">Date</span><span>(items[o]</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">getElementsByTagName</span><span>(</span><span style="color:#86b300;">&quot;pubDate&quot;</span><span>)[</span><span style="color:#ff8f40;">0</span><span>]</span><span style="color:#ed9366;">.</span><span>childNodes[</span><span style="color:#ff8f40;">0</span><span>]</span><span style="color:#ed9366;">.</span><span>nodeValue)</span><span style="color:#61676ccc;">;
</span><span>                </span><span style="color:#fa6e32;">let </span><span>options </span><span style="color:#ed9366;">= </span><span>{ year</span><span style="color:#61676ccc;">: </span><span style="color:#86b300;">&quot;numeric&quot;</span><span style="color:#61676ccc;">, </span><span>month</span><span style="color:#61676ccc;">: </span><span style="color:#86b300;">&quot;long&quot;</span><span style="color:#61676ccc;">, </span><span>day</span><span style="color:#61676ccc;">: </span><span style="color:#86b300;">&quot;numeric&quot; </span><span>}</span><span style="color:#61676ccc;">;
</span><span>                </span><span style="color:#fa6e32;">let </span><span>formattedDate </span><span style="color:#ed9366;">= </span><span>date</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">toLocaleDateString</span><span>(</span><span style="color:#86b300;">&quot;de-DE&quot;</span><span style="color:#61676ccc;">, </span><span>options)</span><span style="color:#61676ccc;">;
</span><span>                dates</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">push</span><span>(formattedDate)</span><span style="color:#61676ccc;">;
</span><span>
</span><span>                </span><span style="color:#fa6e32;">let </span><span>url </span><span style="color:#ed9366;">= </span><span>items[o]</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">getElementsByTagName</span><span>(</span><span style="color:#86b300;">&quot;link&quot;</span><span>)[</span><span style="color:#ff8f40;">0</span><span>]</span><span style="color:#ed9366;">.</span><span>childNodes[</span><span style="color:#ff8f40;">0</span><span>]</span><span style="color:#ed9366;">.</span><span>nodeValue</span><span style="color:#61676ccc;">;
</span><span>                url </span><span style="color:#ed9366;">= </span><span>url</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">split</span><span>(</span><span style="color:#86b300;">&quot;/&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>                url </span><span style="color:#ed9366;">= </span><span>url[url</span><span style="color:#ed9366;">.</span><span>length </span><span style="color:#ed9366;">- </span><span style="color:#ff8f40;">3</span><span>] </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/&quot; </span><span style="color:#ed9366;">+ </span><span>url[url</span><span style="color:#ed9366;">.</span><span>length </span><span style="color:#ed9366;">- </span><span style="color:#ff8f40;">2</span><span>]</span><span style="color:#61676ccc;">;
</span><span>                urls</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">push</span><span>(url)</span><span style="color:#61676ccc;">;
</span><span>
</span><span>                </span><span style="color:#fa6e32;">let </span><span>description </span><span style="color:#ed9366;">= </span><span>items[o]</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">getElementsByTagName</span><span>(</span><span style="color:#86b300;">&quot;description&quot;</span><span>)[</span><span style="color:#ff8f40;">0</span><span>]</span><span style="color:#ed9366;">.</span><span>childNodes[</span><span style="color:#ff8f40;">0</span><span>]</span><span style="color:#ed9366;">.</span><span>nodeValue</span><span style="color:#61676ccc;">;
</span><span>                </span><span style="color:#fa6e32;">if </span><span>(description</span><span style="color:#ed9366;">.</span><span>length </span><span style="color:#ed9366;">&gt; </span><span style="color:#ff8f40;">500</span><span>) {
</span><span>                    description </span><span style="color:#ed9366;">= </span><span>description</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">substring</span><span>(</span><span style="color:#ff8f40;">0</span><span style="color:#61676ccc;">, </span><span style="color:#ff8f40;">500</span><span>) </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;...&quot;</span><span style="color:#61676ccc;">;
</span><span>                }
</span><span>                description </span><span style="color:#ed9366;">= </span><span>description</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">replace</span><span>(</span><span style="color:#4cbf99;">/&lt;</span><span style="color:#ff8f40;">[</span><span style="color:#ed9366;">^</span><span style="color:#ff8f40;">&gt;]</span><span style="color:#ed9366;">*</span><span style="color:#4cbf99;">&gt;</span><span style="color:#ed9366;">?</span><span style="color:#4cbf99;">/</span><span style="color:#fa6e32;">gm</span><span style="color:#61676ccc;">, </span><span style="color:#86b300;">&quot;&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>                content</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">push</span><span>(description)</span><span style="color:#61676ccc;">;
</span><span>            }
</span><span>
</span><span>            </span><span style="font-style:italic;color:#abb0b6;">// Templates anpassen und Bilder generieren
</span><span>            </span><span style="color:#fa6e32;">for </span><span>(</span><span style="color:#fa6e32;">let </span><span>k </span><span style="color:#ed9366;">= </span><span style="color:#ff8f40;">0</span><span style="color:#61676ccc;">; </span><span>k </span><span style="color:#ed9366;">&lt; </span><span>titles</span><span style="color:#ed9366;">.</span><span>length</span><span style="color:#61676ccc;">; </span><span>k</span><span style="color:#ed9366;">++</span><span>) {
</span><span>                </span><span style="color:#fa6e32;">let </span><span>template </span><span style="color:#ed9366;">= </span><span style="font-style:italic;color:#ed9366;">JSON</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">parse</span><span>(fs</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">readFileSync</span><span>(</span><span style="color:#86b300;">&quot;data&quot; </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/&quot; </span><span style="color:#ed9366;">+ </span><span>x</span><span style="color:#61676ccc;">, </span><span style="color:#86b300;">&quot;utf8&quot;</span><span>))</span><span style="color:#61676ccc;">;
</span><span>                </span><span style="color:#fa6e32;">for </span><span>(</span><span style="color:#fa6e32;">let </span><span>i </span><span style="color:#ed9366;">= </span><span style="color:#ff8f40;">0</span><span style="color:#61676ccc;">; </span><span>i </span><span style="color:#ed9366;">&lt; </span><span>template</span><span style="color:#ed9366;">.</span><span>pages</span><span style="color:#ed9366;">.</span><span>length</span><span style="color:#61676ccc;">; </span><span>i</span><span style="color:#ed9366;">++</span><span>) {
</span><span>                    template</span><span style="color:#ed9366;">.</span><span>pages[i]</span><span style="color:#ed9366;">.</span><span>background </span><span style="color:#ed9366;">= </span><span style="color:#86b300;">&quot;linear-gradient(228deg,white 0%,&quot; </span><span style="color:#ed9366;">+ </span><span style="color:#f29718;">getRGB</span><span>(titles[k]) </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot; 100%)&quot;</span><span style="color:#61676ccc;">;
</span><span>                    </span><span style="color:#fa6e32;">for </span><span>(</span><span style="color:#fa6e32;">let </span><span>j </span><span style="color:#ed9366;">= </span><span style="color:#ff8f40;">0</span><span style="color:#61676ccc;">; </span><span>j </span><span style="color:#ed9366;">&lt; </span><span>template</span><span style="color:#ed9366;">.</span><span>pages[i]</span><span style="color:#ed9366;">.</span><span>children</span><span style="color:#ed9366;">.</span><span>length</span><span style="color:#61676ccc;">; </span><span>j</span><span style="color:#ed9366;">++</span><span>) {
</span><span>                        </span><span style="color:#fa6e32;">if </span><span>(template</span><span style="color:#ed9366;">.</span><span>pages[i]</span><span style="color:#ed9366;">.</span><span>children[j]</span><span style="color:#ed9366;">.</span><span>name </span><span style="color:#ed9366;">== </span><span style="color:#86b300;">&quot;title&quot;</span><span>) {
</span><span>                            template</span><span style="color:#ed9366;">.</span><span>pages[i]</span><span style="color:#ed9366;">.</span><span>children[j]</span><span style="color:#ed9366;">.</span><span>text </span><span style="color:#ed9366;">= </span><span>titles[k]</span><span style="color:#61676ccc;">;
</span><span>                        }
</span><span>                        </span><span style="color:#fa6e32;">if </span><span>(template</span><span style="color:#ed9366;">.</span><span>pages[i]</span><span style="color:#ed9366;">.</span><span>children[j]</span><span style="color:#ed9366;">.</span><span>name </span><span style="color:#ed9366;">== </span><span style="color:#86b300;">&quot;date&quot;</span><span>) {
</span><span>                            template</span><span style="color:#ed9366;">.</span><span>pages[i]</span><span style="color:#ed9366;">.</span><span>children[j]</span><span style="color:#ed9366;">.</span><span>text </span><span style="color:#ed9366;">= </span><span style="color:#86b300;">&quot;Simeon Stanek :: &quot; </span><span style="color:#ed9366;">+ </span><span>dates[k]</span><span style="color:#61676ccc;">;
</span><span>                        }
</span><span>                        </span><span style="color:#fa6e32;">if </span><span>(template</span><span style="color:#ed9366;">.</span><span>pages[i]</span><span style="color:#ed9366;">.</span><span>children[j]</span><span style="color:#ed9366;">.</span><span>name </span><span style="color:#ed9366;">== </span><span style="color:#86b300;">&quot;hintergrundtext&quot;</span><span>) {
</span><span>                            template</span><span style="color:#ed9366;">.</span><span>pages[i]</span><span style="color:#ed9366;">.</span><span>children[j]</span><span style="color:#ed9366;">.</span><span>text </span><span style="color:#ed9366;">= </span><span>content[k]</span><span style="color:#61676ccc;">;
</span><span>                        }
</span><span>                    }
</span><span>                }
</span><span>                </span><span style="color:#f29718;">exporter</span><span>(template</span><span style="color:#61676ccc;">, </span><span>k</span><span style="color:#61676ccc;">, </span><span>urls[k]</span><span style="color:#61676ccc;">, </span><span>x</span><span style="color:#61676ccc;">, </span><span>languages)</span><span style="color:#61676ccc;">;
</span><span>            }
</span><span>        })</span><span style="color:#61676ccc;">;
</span><span>
</span><span>    </span><span style="font-style:italic;color:#abb0b6;">// Funktion zur Bildgenerierung und -speicherung
</span><span>    </span><span style="color:#fa6e32;">async function </span><span style="color:#f29718;">exporter</span><span>(</span><span style="color:#ff8f40;">template</span><span style="color:#61676ccc;">, </span><span style="color:#ff8f40;">i</span><span style="color:#61676ccc;">, </span><span style="color:#ff8f40;">url</span><span style="color:#61676ccc;">, </span><span style="color:#ff8f40;">x</span><span style="color:#61676ccc;">, </span><span style="color:#ff8f40;">languages</span><span>) {
</span><span>        fs</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">mkdirSync</span><span>(</span><span style="color:#86b300;">&quot;../content/&quot; </span><span style="color:#ed9366;">+ </span><span>url </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/images/&quot; </span><span style="color:#ed9366;">+ </span><span>languages</span><span style="color:#61676ccc;">, </span><span>{ recursive</span><span style="color:#61676ccc;">: </span><span style="color:#ff8f40;">true </span><span>})</span><span style="color:#61676ccc;">;
</span><span>
</span><span>        </span><span style="color:#fa6e32;">if </span><span>(x </span><span style="color:#ed9366;">== </span><span style="color:#86b300;">&quot;ogimage.json&quot; </span><span style="color:#ed9366;">&amp;&amp; !</span><span>fs</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">existsSync</span><span>(</span><span style="color:#86b300;">&quot;../content/&quot; </span><span style="color:#ed9366;">+ </span><span>url </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/images/&quot; </span><span style="color:#ed9366;">+ </span><span>languages </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/preview.jpg&quot;</span><span>)) {
</span><span>            </span><span style="color:#fa6e32;">let </span><span>instance </span><span style="color:#ed9366;">= </span><span style="color:#fa6e32;">await </span><span style="color:#f29718;">createInstance</span><span>({ key</span><span style="color:#61676ccc;">: </span><span style="color:#86b300;">&quot;[your-api-key]&quot; </span><span>})</span><span style="color:#61676ccc;">;
</span><span>            </span><span style="color:#fa6e32;">let </span><span>pdfBase64 </span><span style="color:#ed9366;">= </span><span style="color:#fa6e32;">await </span><span>instance</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">jsonToImageBase64</span><span>(template</span><span style="color:#61676ccc;">, </span><span>{ mimeType</span><span style="color:#61676ccc;">: </span><span style="color:#86b300;">&quot;image/jpeg&quot; </span><span>})</span><span style="color:#61676ccc;">;
</span><span>            fs</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">writeFileSync</span><span>(</span><span style="color:#86b300;">&quot;../content/&quot; </span><span style="color:#ed9366;">+ </span><span>url </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/images/&quot; </span><span style="color:#ed9366;">+ </span><span>languages </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/preview.jpg&quot;</span><span style="color:#61676ccc;">, </span><span>pdfBase64</span><span style="color:#61676ccc;">, </span><span style="color:#86b300;">&quot;base64&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>            instance</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">close</span><span>()</span><span style="color:#61676ccc;">;
</span><span>        }
</span><span>        </span><span style="color:#fa6e32;">if </span><span>(x </span><span style="color:#ed9366;">== </span><span style="color:#86b300;">&quot;instagram1.json&quot; </span><span style="color:#ed9366;">&amp;&amp; !</span><span>fs</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">existsSync</span><span>(</span><span style="color:#86b300;">&quot;../content/&quot; </span><span style="color:#ed9366;">+ </span><span>url </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/images/&quot; </span><span style="color:#ed9366;">+ </span><span>languages </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/instagram1.jpg&quot;</span><span>)) {
</span><span>            </span><span style="color:#fa6e32;">let </span><span>instance </span><span style="color:#ed9366;">= </span><span style="color:#fa6e32;">await </span><span style="color:#f29718;">createInstance</span><span>({ key</span><span style="color:#61676ccc;">: </span><span style="color:#86b300;">&quot;[your-api-key]&quot; </span><span>})</span><span style="color:#61676ccc;">;
</span><span>            </span><span style="color:#fa6e32;">let </span><span>pdfBase64 </span><span style="color:#ed9366;">= </span><span style="color:#fa6e32;">await </span><span>instance</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">jsonToImageBase64</span><span>(template</span><span style="color:#61676ccc;">, </span><span>{ mimeType</span><span style="color:#61676ccc;">: </span><span style="color:#86b300;">&quot;image/jpeg&quot; </span><span>})</span><span style="color:#61676ccc;">;
</span><span>            fs</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">writeFileSync</span><span>(</span><span style="color:#86b300;">&quot;../content/&quot; </span><span style="color:#ed9366;">+ </span><span>url </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/images/&quot; </span><span style="color:#ed9366;">+ </span><span>languages </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/instagram1.jpg&quot;</span><span style="color:#61676ccc;">, </span><span>pdfBase64</span><span style="color:#61676ccc;">, </span><span style="color:#86b300;">&quot;base64&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>            instance</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">close</span><span>()</span><span style="color:#61676ccc;">;
</span><span>        }
</span><span>        </span><span style="color:#fa6e32;">if </span><span>(x </span><span style="color:#ed9366;">== </span><span style="color:#86b300;">&quot;instagram2.json&quot; </span><span style="color:#ed9366;">&amp;&amp; !</span><span>fs</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">existsSync</span><span>(</span><span style="color:#86b300;">&quot;../content/&quot; </span><span style="color:#ed9366;">+ </span><span>url </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/images/&quot; </span><span style="color:#ed9366;">+ </span><span>languages </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/instagram2.jpg&quot;</span><span>)) {
</span><span>            </span><span style="color:#fa6e32;">let </span><span>instance </span><span style="color:#ed9366;">= </span><span style="color:#fa6e32;">await </span><span style="color:#f29718;">createInstance</span><span>({ key</span><span style="color:#61676ccc;">: </span><span style="color:#86b300;">&quot;[your-api-key]&quot; </span><span>})</span><span style="color:#61676ccc;">;
</span><span>            </span><span style="color:#fa6e32;">let </span><span>pdfBase64 </span><span style="color:#ed9366;">= </span><span style="color:#fa6e32;">await </span><span>instance</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">jsonToImageBase64</span><span>(template</span><span style="color:#61676ccc;">, </span><span>{ mimeType</span><span style="color:#61676ccc;">: </span><span style="color:#86b300;">&quot;image/jpeg&quot; </span><span>})</span><span style="color:#61676ccc;">;
</span><span>            fs</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">writeFileSync</span><span>(</span><span style="color:#86b300;">&quot;../content/&quot; </span><span style="color:#ed9366;">+ </span><span>url </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/images/&quot; </span><span style="color:#ed9366;">+ </span><span>languages </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/instagram2.jpg&quot;</span><span style="color:#61676ccc;">, </span><span>pdfBase64</span><span style="color:#61676ccc;">, </span><span style="color:#86b300;">&quot;base64&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>            instance</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">close</span><span>()</span><span style="color:#61676ccc;">;
</span><span>        }
</span><span>        </span><span style="color:#fa6e32;">if </span><span>(x </span><span style="color:#ed9366;">== </span><span style="color:#86b300;">&quot;feed.json&quot; </span><span style="color:#ed9366;">&amp;&amp; !</span><span>fs</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">existsSync</span><span>(</span><span style="color:#86b300;">&quot;../content/&quot; </span><span style="color:#ed9366;">+ </span><span>url </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/images/&quot; </span><span style="color:#ed9366;">+ </span><span>languages </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/feed.jpg&quot;</span><span>)) {
</span><span>            </span><span style="color:#fa6e32;">let </span><span>instance </span><span style="color:#ed9366;">= </span><span style="color:#fa6e32;">await </span><span style="color:#f29718;">createInstance</span><span>({ key</span><span style="color:#61676ccc;">: </span><span style="color:#86b300;">&quot;[your-api-key]&quot; </span><span>})</span><span style="color:#61676ccc;">;
</span><span>            </span><span style="color:#fa6e32;">let </span><span>pdfBase64 </span><span style="color:#ed9366;">= </span><span style="color:#fa6e32;">await </span><span>instance</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">jsonToImageBase64</span><span>(template</span><span style="color:#61676ccc;">, </span><span>{ mimeType</span><span style="color:#61676ccc;">: </span><span style="color:#86b300;">&quot;image/jpeg&quot; </span><span>})</span><span style="color:#61676ccc;">;
</span><span>            fs</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">writeFileSync</span><span>(</span><span style="color:#86b300;">&quot;../content/&quot; </span><span style="color:#ed9366;">+ </span><span>url </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/images/&quot; </span><span style="color:#ed9366;">+ </span><span>languages </span><span style="color:#ed9366;">+ </span><span style="color:#86b300;">&quot;/feed.jpg&quot;</span><span style="color:#61676ccc;">, </span><span>pdfBase64</span><span style="color:#61676ccc;">, </span><span style="color:#86b300;">&quot;base64&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>            instance</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">close</span><span>()</span><span style="color:#61676ccc;">;
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span><span style="font-style:italic;color:#abb0b6;">// Funktion zur Erzeugung eines RGB-Farbwerts aus einem String
</span><span style="color:#fa6e32;">function </span><span style="color:#f29718;">getRGB</span><span>(</span><span style="color:#ff8f40;">str</span><span>) {
</span><span>    </span><span style="color:#fa6e32;">let </span><span>hashed </span><span style="color:#ed9366;">= </span><span style="color:#f29718;">hash</span><span>(str)</span><span style="color:#61676ccc;">;
</span><span>    </span><span style="color:#fa6e32;">let </span><span>result </span><span style="color:#ed9366;">= </span><span>hashed</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">toString</span><span>(</span><span style="color:#ff8f40;">16</span><span>)</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">substring</span><span>(</span><span style="color:#ff8f40;">0</span><span style="color:#61676ccc;">, </span><span style="color:#ff8f40;">6</span><span>)</span><span style="color:#61676ccc;">;
</span><span>    </span><span style="color:#fa6e32;">return </span><span style="color:#86b300;">&quot;#&quot; </span><span style="color:#ed9366;">+ </span><span>result</span><span style="color:#61676ccc;">;
</span><span>}
</span><span>
</span><span style="font-style:italic;color:#abb0b6;">// Hauptfunktion zur Generierung der Bilder
</span><span style="color:#fa6e32;">async function </span><span style="color:#f29718;">generate</span><span>() {
</span><span>    </span><span style="color:#f29718;">run</span><span>(</span><span style="color:#86b300;">&quot;ogimage.json&quot;</span><span style="color:#61676ccc;">, </span><span style="color:#86b300;">&quot;http://127.0.0.1:1234/rss.xml&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>
</span><span>    </span><span style="color:#f07171;">setTimeout</span><span>(() </span><span style="color:#fa6e32;">=&gt; </span><span>{
</span><span>        </span><span style="color:#f29718;">run</span><span>(</span><span style="color:#86b300;">&quot;instagram1.json&quot;</span><span style="color:#61676ccc;">, </span><span style="color:#86b300;">&quot;http://127.0.0.1:1234/rss.xml&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>    }</span><span style="color:#61676ccc;">, </span><span style="color:#ff8f40;">1000</span><span>)</span><span style="color:#61676ccc;">;
</span><span>
</span><span>    </span><span style="color:#f07171;">setTimeout</span><span>(() </span><span style="color:#fa6e32;">=&gt; </span><span>{
</span><span>        </span><span style="color:#f29718;">run</span><span>(</span><span style="color:#86b300;">&quot;instagram2.json&quot;</span><span style="color:#61676ccc;">, </span><span style="color:#86b300;">&quot;http://127.0.0.1:1234/rss.xml&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>    }</span><span style="color:#61676ccc;">, </span><span style="color:#ff8f40;">1000</span><span>)</span><span style="color:#61676ccc;">;
</span><span>
</span><span>    </span><span style="color:#f07171;">setTimeout</span><span>(() </span><span style="color:#fa6e32;">=&gt; </span><span>{
</span><span>        </span><span style="color:#f29718;">run</span><span>(</span><span style="color:#86b300;">&quot;feed.json&quot;</span><span style="color:#61676ccc;">, </span><span style="color:#86b300;">&quot;http://127.0.0.1:1234/rss.xml&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>    }</span><span style="color:#61676ccc;">, </span><span style="color:#ff8f40;">1000</span><span>)</span><span style="color:#61676ccc;">;
</span><span>
</span><span>    </span><span style="color:#f07171;">setTimeout</span><span>(() </span><span style="color:#fa6e32;">=&gt; </span><span>{
</span><span>        </span><span style="color:#f29718;">run</span><span>(</span><span style="color:#86b300;">&quot;ogimage.json&quot;</span><span style="color:#61676ccc;">, </span><span style="color:#86b300;">&quot;http://127.0.0.1:1234/en/rss.xml&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>    }</span><span style="color:#61676ccc;">, </span><span style="color:#ff8f40;">1000</span><span>)</span><span style="color:#61676ccc;">;
</span><span>
</span><span>    </span><span style="color:#f07171;">setTimeout</span><span>(() </span><span style="color:#fa6e32;">=&gt; </span><span>{
</span><span>        </span><span style="color:#f29718;">run</span><span>(</span><span style="color:#86b300;">&quot;instagram1.json&quot;</span><span style="color:#61676ccc;">, </span><span style="color:#86b300;">&quot;http://127.0.0.1:1234/en/rss.xml&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>    }</span><span style="color:#61676ccc;">, </span><span style="color:#ff8f40;">1000</span><span>)</span><span style="color:#61676ccc;">;
</span><span>
</span><span>    </span><span style="color:#f07171;">setTimeout</span><span>(() </span><span style="color:#fa6e32;">=&gt; </span><span>{
</span><span>        </span><span style="color:#f29718;">run</span><span>(</span><span style="color:#86b300;">&quot;instagram2.json&quot;</span><span style="color:#61676ccc;">, </span><span style="color:#86b300;">&quot;http://127.0.0.1:1234/en/rss.xml&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>    }</span><span style="color:#61676ccc;">, </span><span style="color:#ff8f40;">1000</span><span>)</span><span style="color:#61676ccc;">;
</span><span>
</span><span>    </span><span style="color:#f07171;">setTimeout</span><span>(() </span><span style="color:#fa6e32;">=&gt; </span><span>{
</span><span>        </span><span style="color:#f29718;">run</span><span>(</span><span style="color:#86b300;">&quot;feed.json&quot;</span><span style="color:#61676ccc;">, </span><span style="color:#86b300;">&quot;http://127.0.0.1:1234/en/rss.xml&quot;</span><span>)</span><span style="color:#61676ccc;">;
</span><span>    }</span><span style="color:#61676ccc;">, </span><span style="color:#ff8f40;">1000</span><span>)</span><span style="color:#61676ccc;">;
</span><span>}
</span><span>
</span><span style="color:#f29718;">generate</span><span>()</span><span style="color:#61676ccc;">;
</span></code></pre>
<h2 id="der-ablauf-im-detail"><a class="zola-anchor" href="#der-ablauf-im-detail" aria-label="Anchor link for: der-ablauf-im-detail">Der Ablauf im Detail</a></h2>
<h3 id="1-daten-aus-dem-rss-feed-auslesen"><a class="zola-anchor" href="#1-daten-aus-dem-rss-feed-auslesen" aria-label="Anchor link for: 1-daten-aus-dem-rss-feed-auslesen">1. Daten aus dem RSS-Feed auslesen</a></h3>
<p>Das Script beginnt damit, den RSS-Feed des Blogs zu fetchen und die relevanten Informationen zu extrahieren:</p>
<ul>
<li>Titel der Beiträge</li>
<li>Veröffentlichungsdatum (formatiert)</li>
<li>URLs der Beiträge</li>
<li>Kurzbeschreibungen (auf 500 Zeichen gekürzt)</li>
</ul>
<p>Dabei wird der Feed als XML geparst und die Daten in Arrays gespeichert.</p>
<h3 id="2-individuelle-farbgebung-pro-artikel"><a class="zola-anchor" href="#2-individuelle-farbgebung-pro-artikel" aria-label="Anchor link for: 2-individuelle-farbgebung-pro-artikel">2. Individuelle Farbgebung pro Artikel</a></h3>
<p>Eine clevere Funktion des Scripts ist die automatische Farbgenerierung für jeden Artikel:</p>
<pre data-lang="typescript" style="background-color:#fafafa;color:#61676c;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><span style="color:#fa6e32;">function </span><span style="color:#f29718;">getRGB</span><span>(</span><span style="color:#ff8f40;">str</span><span>) {
</span><span>  </span><span style="color:#fa6e32;">let </span><span>hashed </span><span style="color:#ed9366;">= </span><span style="color:#f29718;">hash</span><span>(str)</span><span style="color:#61676ccc;">;
</span><span>  </span><span style="color:#fa6e32;">let </span><span>result </span><span style="color:#ed9366;">= </span><span>hashed</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">toString</span><span>(</span><span style="color:#ff8f40;">16</span><span>)</span><span style="color:#ed9366;">.</span><span style="color:#f07171;">substring</span><span>(</span><span style="color:#ff8f40;">0</span><span style="color:#61676ccc;">, </span><span style="color:#ff8f40;">6</span><span>)</span><span style="color:#61676ccc;">;
</span><span>  </span><span style="color:#fa6e32;">return </span><span style="color:#86b300;">&quot;#&quot; </span><span style="color:#ed9366;">+ </span><span>result</span><span style="color:#61676ccc;">;
</span><span>}
</span></code></pre>
<p>Diese Funktion erzeugt aus dem Titel des Artikels einen Hash-Wert und wandelt diesen in einen HEX-Farbcode um. So erhält jeder Artikel eine einzigartige, aber konsistente Farbgebung, die bei jedem Durchlauf gleich bleibt.</p>
<h3 id="3-template-anpassung-fur-jeden-artikel"><a class="zola-anchor" href="#3-template-anpassung-fur-jeden-artikel" aria-label="Anchor link for: 3-template-anpassung-fur-jeden-artikel">3. Template-Anpassung für jeden Artikel</a></h3>
<p>Für jeden Bildtyp (OG-Image, Instagram, Feed) gibt es eine JSON-Vorlage im "data"-Verzeichnis. Diese Vorlagen werden für jeden Artikel dynamisch angepasst. Erstellt habe ich die Templates mit <a href="https://studio.polotno.com/">Polotno Studio</a>:</p>
<ul>
<li>Der Hintergrund erhält einen individuellen Farbverlauf</li>
<li>Der Titel wird eingefügt</li>
<li>Das Datum mit Autorname wird hinzugefügt</li>
<li>Ein Ausschnitt des Inhalts wird als Hintergrundtext verwendet
Natürlich sollte man sich vergwissern, dass die Layer im jeweiligen JSON-Template auch so heißen, wie sie im TypeScript-Script angesprochen werden.</li>
</ul>
<p><img src="https://simeon.staneks.de/posts/image-generation-for-zola-with-polotno/images/polotno00001.png" alt="Polotno Studio" /></p>
<h3 id="4-bildgenerierung-mit-polotno"><a class="zola-anchor" href="#4-bildgenerierung-mit-polotno" aria-label="Anchor link for: 4-bildgenerierung-mit-polotno">4. Bildgenerierung mit Polotno</a></h3>
<p>Die angepassten Templates werden mit Polotno in JPEG-Bilder umgewandelt:</p>
<pre data-lang="typescript" style="background-color:#fafafa;color:#61676c;" class="language-typescript "><code class="language-typescript" data-lang="typescript"><span style="color:#fa6e32;">let </span><span>instance </span><span style="color:#ed9366;">= </span><span style="color:#fa6e32;">await </span><span style="color:#f29718;">createInstance</span><span>({
</span><span>  key</span><span style="color:#61676ccc;">:</span><span>[your</span><span style="color:#ed9366;">-</span><span>api</span><span style="color:#ed9366;">-</span><span>key]</span><span style="color:#86b300;">&quot;</span><span style="color:#f51818;">,
</span><span>})</span><span style="color:#61676ccc;">;
</span><span style="font-style:italic;color:#abb0b6;">// hatte es verpasst die Variabele umzubenennen
</span><span style="color:#fa6e32;">let </span><span>pdfBase64 </span><span style="color:#ed9366;">= </span><span style="color:#fa6e32;">await </span><span>instance</span><span style="color:#ed9366;">.</span><span style="color:#f29718;">jsonToImageBase64</span><span>(template</span><span style="color:#61676ccc;">, </span><span>{
</span><span>  mimeType</span><span style="color:#61676ccc;">: </span><span style="color:#86b300;">&quot;image/jpeg&quot;</span><span style="color:#61676ccc;">,
</span><span>})</span><span style="color:#61676ccc;">;
</span></code></pre>
<h3 id="5-speicherung-der-bilder-in-der-blogstruktur"><a class="zola-anchor" href="#5-speicherung-der-bilder-in-der-blogstruktur" aria-label="Anchor link for: 5-speicherung-der-bilder-in-der-blogstruktur">5. Speicherung der Bilder in der Blogstruktur</a></h3>
<p>Die generierten Bilder werden in einem strukturierten Verzeichnisbaum gespeichert:</p>
<pre style="background-color:#fafafa;color:#61676c;"><code><span>/content/[artikelname]/images/[sprache]/[bildtyp].jpg
</span></code></pre>
<h3 id="6-mehrsprachige-unterstutzung"><a class="zola-anchor" href="#6-mehrsprachige-unterstutzung" aria-label="Anchor link for: 6-mehrsprachige-unterstutzung">6. Mehrsprachige Unterstützung</a></h3>
<p>Das Script generiert automatisch Bilder für alle Sprachversionen des Blogs (im Beispiel Deutsch und Englisch).</p>
<h2 id="zola-konfiguration-fur-die-bildnutzung"><a class="zola-anchor" href="#zola-konfiguration-fur-die-bildnutzung" aria-label="Anchor link for: zola-konfiguration-fur-die-bildnutzung">Zola-Konfiguration für die Bildnutzung</a></h2>
<p>Damit Zola die generierten Bilder korrekt nutzen kann, hier ein Beispiel für die entsprechende Template-Konfiguration:</p>
<pre data-lang="html" style="background-color:#fafafa;color:#61676c;" class="language-html "><code class="language-html" data-lang="html"><span>    {% if page.path %}
</span><span>    </span><span style="color:#55b4d490;">&lt;</span><span style="color:#399ee6;">meta </span><span style="color:#f29718;">property</span><span style="color:#61676ccc;">=</span><span style="color:#86b300;">&quot;og:image&quot; </span><span style="color:#f29718;">content</span><span style="color:#61676ccc;">=</span><span style="color:#86b300;">&quot;{{config.base_url | safe}}{{ page.path | safe }}/images/{{lang}}/preview.jpg&quot; </span><span style="color:#55b4d490;">/&gt;
</span><span>    </span><span style="color:#55b4d490;">&lt;</span><span style="color:#399ee6;">meta </span><span style="color:#f29718;">property</span><span style="color:#61676ccc;">=</span><span style="color:#86b300;">&quot;og:logo&quot; </span><span style="color:#f29718;">content</span><span style="color:#61676ccc;">=</span><span style="color:#86b300;">&quot;{{config.base_url | safe}}{{ page.path | safe }}/images{{lang}}/preview.jpg&quot; </span><span style="color:#55b4d490;">/&gt;
</span><span>    </span><span style="font-style:italic;color:#abb0b6;">&lt;!-- twitter card --&gt;
</span><span>    </span><span style="color:#55b4d490;">&lt;</span><span style="color:#399ee6;">meta </span><span style="color:#f29718;">name</span><span style="color:#61676ccc;">=</span><span style="color:#86b300;">&quot;twitter:card&quot; </span><span style="color:#f29718;">content</span><span style="color:#61676ccc;">=</span><span style="color:#86b300;">&quot;summary_large_image&quot;</span><span style="color:#55b4d490;">&gt;
</span><span>    </span><span style="color:#55b4d490;">&lt;</span><span style="color:#399ee6;">meta </span><span style="color:#f29718;">name</span><span style="color:#61676ccc;">=</span><span style="color:#86b300;">&quot;twitter:image&quot; </span><span style="color:#f29718;">content</span><span style="color:#61676ccc;">=</span><span style="color:#86b300;">&quot;{{config.base_url | safe}}{{ page.path | safe }}images/{{lang}}/preview.jpg&quot;</span><span style="color:#55b4d490;">&gt;
</span><span>    {% elif config.extra.favicon %}
</span><span>    </span><span style="color:#55b4d490;">&lt;</span><span style="color:#399ee6;">meta </span><span style="color:#f29718;">property</span><span style="color:#61676ccc;">=</span><span style="color:#86b300;">&quot;og:image&quot; </span><span style="color:#f29718;">content</span><span style="color:#61676ccc;">=</span><span style="color:#86b300;">&quot;{{ config.extra.favicon }}&quot; </span><span style="color:#55b4d490;">/&gt;
</span><span>    {% endif %}
</span></code></pre>
<h2 id="die-vorteile-der-automatisierung"><a class="zola-anchor" href="#die-vorteile-der-automatisierung" aria-label="Anchor link for: die-vorteile-der-automatisierung">Die Vorteile der Automatisierung</a></h2>
<p>Diese Lösung bietet mehrere Vorteile:</p>
<ol>
<li><strong>Konsistentes Design</strong>: Alle Bilder folgen demselben Design-Schema, was die Markenidentität stärkt (wenn ich eine hätte).</li>
<li><strong>Individueller Touch</strong>: Jeder Artikel erhält trotzdem eine eigene Farbgebung und seinen Inhalt als visuelle Elemente.</li>
<li><strong>Zeiteinsparung</strong>: Die Bildgenerierung erfolgt bevor der Artikel veröffentlicht wird, indem ich nur das Deployment-Script ausführe.</li>
<li><strong>Mehrsprachigkeit</strong>: Alle Sprachversionen werden ohne zusätzlichen Aufwand unterstützt.</li>
<li><strong>Vollständige Integration</strong>: Durch die Git-Integration werden alle Änderungen sofort veröffentlicht.</li>
</ol>
<h2 id="fazit"><a class="zola-anchor" href="#fazit" aria-label="Anchor link for: fazit">Fazit</a></h2>
<p>Mit dieser Kombination aus Zola, Bun, TypeScript und Polotno habe ich eine elegante Lösung gefunden, um den Workflow für meinen Blog zu verbessern. Die automatische Bildgenerierung sorgt dafür, dass jeder Artikel visuell ansprechend präsentiert wird, ohne dass ich dafür zusätzlichen Aufwand betreiben muss.</p>
<p>Die Lösung ist flexibel und kann leicht an andere Anforderungen angepasst werden - sei es durch Änderung der Templates, Hinzufügen weiterer Bildformate oder Anpassung der visuellen Elemente.</p>
<p>Falls du diesen Ansatz für deinen eigenen Blog verwenden möchtest, stelle sicher, dass du einen eigenen Polotno-API-Key erhältst und die Templates an dein eigenes Design anpasst.</p>

        </section>
    </article>
    <hr>
    <br>
    <div class="meta">
        
            <span class="date-label-posted">:: Posted on </span><time>2025-02-27</time>
        

        

        

        
        
                <span class="tags-label"> :: Tags:</span>
                <span class="tags">
                        <a href="https://simeon.staneks.de/tags/programmierung/" class="post-tag">programmierung</a>, 
                    
                        <a href="https://simeon.staneks.de/tags/zola/" class="post-tag">zola</a>, 
                    
                        <a href="https://simeon.staneks.de/tags/typescript/" class="post-tag">typescript</a>, 
                    
                        <a href="https://simeon.staneks.de/tags/polotno/" class="post-tag">polotno</a>, 
                    
                        <a href="https://simeon.staneks.de/tags/bun/" class="post-tag">bun</a>, 
                    
                        <a href="https://simeon.staneks.de/tags/automatisierung/" class="post-tag">automatisierung</a>, 
                    
                        <a href="https://simeon.staneks.de/tags/bloggen/" class="post-tag">bloggen</a>, 
                    
                        <a href="https://simeon.staneks.de/tags/rss/" class="post-tag">rss</a>, 
                    
                        <a href="https://simeon.staneks.de/tags/bildgenerierung/" class="post-tag">bildgenerierung</a>
                    
                </span>
        

        
       
                
     

            
                
                :: <a href="https:&#x2F;&#x2F;github.com&#x2F;SimeonLukas&#x2F;Blog&#x2F;tree&#x2F;main&#x2F;content&#x2F;posts&#x2F;image-generation-for-zola-with-polotno&#x2F;index.md" target="_blank" rel="noopener noreferrer"> Source Code</a>
            

        

    </div>
</main>



        
            
        

        
        <br>
        <hr>
        <div class="giscus" >
        <script src="https://giscus.app/client.js"
        data-repo="SimeonLukas/Blog"
        data-repo-id="R_kgDONSw5PA"
        data-category="Announcements"
        data-category-id="DIC_kwDONSw5PM4CkoL8"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="https:&#x2F;&#x2F;simeon.staneks.de/css/giscus.css"
        data-lang="de"
        crossorigin="anonymous"
        async>
</script>


    </div>
    <br>
    <br>
    <br>
        

    </div>
</body>

</html>
